<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Thang điểm NIHSS</title>
    
    <!-- TAILWIND CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FONTS & ICONS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- ICONS & PWA -->
    <meta name="theme-color" content="#4f46e5">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="icon" type="image/png" href="logo.png">

    <style>
        /* --- APP FEEL OPTIMIZATIONS (CHUẨN) --- */
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f3f4f6; 
            padding-bottom: 80px; /* Space for Bottom Nav */
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none; /* Ngăn chọn text toàn trang */
            user-select: none;
            touch-action: pan-x pan-y;
        }

        /* Cho phép chọn text ở input và kết quả */
        .result-text, input, textarea, select {
            -webkit-user-select: text;
            user-select: text;
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translate3d(0, 20px, 0); }
            to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        /* Tùy chỉnh thanh cuộn nếu cần */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }

        /* Custom Select Appearance */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234f46e5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
        }
    </style>
</head>
<body>

    <!-- A. Desktop Header -->
    <header class="hidden md:flex fixed top-0 w-full bg-white shadow-sm z-50 h-16 items-center px-8 justify-between">
        <div class="flex items-center gap-3">
            <img src="logo.png" alt="Logo" class="w-10 h-10 object-contain" onerror="this.src='https://via.placeholder.com/40'">
            <h1 class="text-xl md:text-3xl font-bold text-blue-600">Máy Tính Y Học</h1>
        </div>
        <nav class="flex gap-8 text-sm md:text-lg font-medium text-gray-600">
            <a href="index.html" class="hover:text-teal-600 transition">Trang chủ</a>
            <a href="cong-cu.html" class="text-teal-600 font-bold">Công cụ</a>
            <a href="#" onclick="openDrawer(event)" class="hover:text-teal-600 transition">Khác</a>
        </nav>
    </header>

    <!-- B. Mobile Header (App Style) -->
    <header class="md:hidden fixed top-0 left-0 right-0 bg-white shadow-sm z-40 h-[60px] flex items-center px-4">
        <a href="cong-cu.html" class="p-2 -ml-2 text-gray-600 hover:text-indigo-600 transition">
            <i class="fa-solid fa-chevron-left text-lg"></i>
        </a>
        <h1 class="flex-1 text-center text-lg font-bold text-gray-800 truncate px-2">
            Thang điểm NIHSS
        </h1>
        <div class="w-8"></div> <!-- Spacer để căn giữa tiêu đề -->
    </header>

    <!-- MAIN CONTENT WRAPPER -->
    <main class="flex-grow container mx-auto px-4 pt-20 md:pt-24 pb-4 max-w-4xl">
        <!-- KHỐI CARD CHÍNH CỦA CÔNG CỤ -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden animate-fade-in-up">
            
            <!-- HEADER CỦA CARD (DESKTOP) -->
            <div class="hidden md:flex bg-indigo-600 p-6 text-white items-center justify-between">
                <div class="flex items-center">
                    <!-- Nút Back Desktop -->
                    <a href="cong-cu.html" class="hidden md:flex w-10 h-10 rounded-full bg-indigo-500 hover:bg-indigo-400 items-center justify-center text-white transition shadow-sm mr-4">
                        <i class="fa-solid fa-chevron-left"></i>
                    </a>
                    <div>
                        <h1 class="text-2xl font-bold">Thang điểm NIHSS</h1>
                        <p class="text-indigo-100 mt-1 text-sm">Đánh giá mức độ lâm sàng bệnh nhân đột quỵ não cấp</p>
                    </div>
                </div>
                <!-- Icon đại diện mờ -->
                <i class="fa-solid fa-brain text-4xl text-indigo-300 opacity-50"></i>
            </div>

            <!-- FORM TÍNH TOÁN -->
            <div class="p-4 md:p-8">
                <div class="bg-blue-50 border border-blue-100 rounded-xl p-4 mb-6 flex items-start">
                    <i class="fa-solid fa-circle-info text-blue-500 mt-0.5 mr-3 flex-shrink-0"></i>
                    <p class="text-sm text-blue-700">Chọn điểm cho từng mục (0-4 điểm) để tính tổng điểm NIHSS và phân loại mức độ đột quỵ.</p>
                </div>

                <div class="space-y-6">
                    <!-- 1a -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss1a" class="block text-sm font-bold text-gray-800 mb-1">1a. Mức độ ý thức</label>
                        <p class="text-xs text-gray-500 mb-3">Đánh giá mức độ tỉnh táo và phản ứng.</p>
                        <select id="nihss1a" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Tỉnh táo, đáp ứng tốt</option>
                            <option value="1">1 = Lơ mơ, kích thích tối thiểu</option>
                            <option value="2">2 = Lơ mơ, cần kích thích mạnh</option>
                            <option value="3">3 = Hôn mê / Không đáp ứng</option>
                        </select>
                    </div>

                    <!-- 1b -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss1b" class="block text-sm font-bold text-gray-800 mb-1">1b. Trả lời câu hỏi</label>
                        <p class="text-xs text-gray-500 mb-3">Hỏi bệnh nhân tháng hiện tại và tuổi.</p>
                        <select id="nihss1b" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Trả lời đúng cả hai</option>
                            <option value="1">1 = Trả lời đúng một câu</option>
                            <option value="2">2 = Trả lời sai cả hai / Không trả lời</option>
                        </select>
                    </div>

                    <!-- 1c -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss1c" class="block text-sm font-bold text-gray-800 mb-1">1c. Làm theo lệnh</label>
                        <p class="text-xs text-gray-500 mb-3">Yêu cầu mở/nhắm mắt và nắm/mở tay.</p>
                        <select id="nihss1c" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Thực hiện đúng cả hai</option>
                            <option value="1">1 = Thực hiện đúng một lệnh</option>
                            <option value="2">2 = Không thực hiện đúng lệnh nào</option>
                        </select>
                    </div>

                    <!-- 2 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss2" class="block text-sm font-bold text-gray-800 mb-1">2. Vận động nhãn cầu</label>
                        <p class="text-xs text-gray-500 mb-3">Kiểm tra di chuyển mắt theo hướng ngang.</p>
                        <select id="nihss2" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Liệt nhìn một phần</option>
                            <option value="2">2 = Liệt nhìn hoàn toàn (ngang)</option>
                        </select>
                    </div>

                    <!-- 3 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss3" class="block text-sm font-bold text-gray-800 mb-1">3. Thị trường</label>
                        <p class="text-xs text-gray-500 mb-3">Kiểm tra thị trường bằng cách đếm ngón tay.</p>
                        <select id="nihss3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Bán manh một phần</option>
                            <option value="2">2 = Bán manh hoàn toàn</option>
                            <option value="3">3 = Mù hai mắt</option>
                        </select>
                    </div>

                    <!-- 4 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss4" class="block text-sm font-bold text-gray-800 mb-1">4. Liệt mặt</label>
                        <p class="text-xs text-gray-500 mb-3">Yêu cầu cười, nhăn trán, nhắm mắt.</p>
                        <select id="nihss4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Liệt mặt nhẹ (mờ rãnh mũi má)</option>
                            <option value="2">2 = Liệt mặt một phần (nửa dưới)</option>
                            <option value="3">3 = Liệt mặt hoàn toàn (nửa trên và dưới)</option>
                        </select>
                    </div>

                    <!-- 5a & 5b -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                            <label for="nihss5a" class="block text-sm font-bold text-gray-800 mb-1">5a. Tay Trái</label>
                            <p class="text-xs text-gray-500 mb-3">Giữ tay 90° (ngồi) hoặc 45° (nằm) trong 10s.</p>
                            <select id="nihss5a" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                                <option value="0">0 = Không liệt</option>
                                <option value="1">1 = Rơi nhẹ (giữ được 10s)</option>
                                <option value="2">2 = Rơi nhưng còn chống trọng lực (&lt;10s)</option>
                                <option value="3">3 = Rơi ngay (không chống trọng lực)</option>
                                <option value="4">4 = Không cử động</option>
                            </select>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                            <label for="nihss5b" class="block text-sm font-bold text-gray-800 mb-1">5b. Tay Phải</label>
                            <p class="text-xs text-gray-500 mb-3">Giữ tay 90° (ngồi) hoặc 45° (nằm) trong 10s.</p>
                            <select id="nihss5b" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                                <option value="0">0 = Không liệt</option>
                                <option value="1">1 = Rơi nhẹ (giữ được 10s)</option>
                                <option value="2">2 = Rơi nhưng còn chống trọng lực (&lt;10s)</option>
                                <option value="3">3 = Rơi ngay (không chống trọng lực)</option>
                                <option value="4">4 = Không cử động</option>
                            </select>
                        </div>
                    </div>

                    <!-- 6a & 6b -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                            <label for="nihss6a" class="block text-sm font-bold text-gray-800 mb-1">6a. Chân Trái</label>
                            <p class="text-xs text-gray-500 mb-3">Giữ chân 30° trong 5 giây.</p>
                            <select id="nihss6a" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                                <option value="0">0 = Không liệt</option>
                                <option value="1">1 = Rơi nhẹ (giữ được 5s)</option>
                                <option value="2">2 = Rơi nhưng còn chống trọng lực (&lt;5s)</option>
                                <option value="3">3 = Rơi ngay (không chống trọng lực)</option>
                                <option value="4">4 = Không cử động</option>
                            </select>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                            <label for="nihss6b" class="block text-sm font-bold text-gray-800 mb-1">6b. Chân Phải</label>
                            <p class="text-xs text-gray-500 mb-3">Giữ chân 30° trong 5 giây.</p>
                            <select id="nihss6b" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                                <option value="0">0 = Không liệt</option>
                                <option value="1">1 = Rơi nhẹ (giữ được 5s)</option>
                                <option value="2">2 = Rơi nhưng còn chống trọng lực (&lt;5s)</option>
                                <option value="3">3 = Rơi ngay (không chống trọng lực)</option>
                                <option value="4">4 = Không cử động</option>
                            </select>
                        </div>
                    </div>

                    <!-- 7 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss7" class="block text-sm font-bold text-gray-800 mb-1">7. Mất điều hòa vận động</label>
                        <p class="text-xs text-gray-500 mb-3">Nghiệm pháp ngón tay chỉ mũi, gót chân chỉ đầu gối.</p>
                        <select id="nihss7" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Không có</option>
                            <option value="1">1 = Mất điều hòa ở một chi</option>
                            <option value="2">2 = Mất điều hòa ở hai chi</option>
                        </select>
                    </div>

                    <!-- 8 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss8" class="block text-sm font-bold text-gray-800 mb-1">8. Cảm giác</label>
                        <p class="text-xs text-gray-500 mb-3">Kiểm tra cảm giác đau/chạm bằng kim.</p>
                        <select id="nihss8" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Giảm cảm giác nhẹ/trung bình</option>
                            <option value="2">2 = Mất cảm giác nặng/hoàn toàn</option>
                        </select>
                    </div>

                    <!-- 9 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss9" class="block text-sm font-bold text-gray-800 mb-1">9. Ngôn ngữ (Thất ngôn)</label>
                        <p class="text-xs text-gray-500 mb-3">Mô tả tranh, đặt câu, gọi tên đồ vật.</p>
                        <select id="nihss9" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Thất ngôn nhẹ - trung bình</option>
                            <option value="2">2 = Thất ngôn nặng</option>
                            <option value="3">3 = Câm (Mute) / Thất ngôn toàn bộ</option>
                        </select>
                    </div>

                    <!-- 10 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss10" class="block text-sm font-bold text-gray-800 mb-1">10. Nói đớ (Dysarthria)</label>
                        <p class="text-xs text-gray-500 mb-3">Đọc các từ/câu mẫu.</p>
                        <select id="nihss10" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Bình thường</option>
                            <option value="1">1 = Nói đớ nhẹ - trung bình</option>
                            <option value="2">2 = Nói đớ nặng / Không nói được</option>
                        </select>
                    </div>

                    <!-- 11 -->
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                        <label for="nihss11" class="block text-sm font-bold text-gray-800 mb-1">11. Sự chú ý (Extinction/Neglect)</label>
                        <p class="text-xs text-gray-500 mb-3">Kiểm tra bỏ sót thị giác/xúc giác không gian.</p>
                        <select id="nihss11" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm bg-white text-gray-700 font-medium">
                            <option value="0">0 = Không bỏ sót</option>
                            <option value="1">1 = Bỏ sót một phần (thị giác/xúc giác)</option>
                            <option value="2">2 = Bỏ sót hoàn toàn (hemi-inattention)</option>
                        </select>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-2 gap-4 mt-8">
                    <button onclick="clearInputs()" class="flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition active:scale-95">
                        <i class="fa-solid fa-rotate-left"></i> Làm mới
                    </button>
                    <button onclick="calculateNIHSS()" class="flex items-center justify-center gap-2 py-3 px-4 rounded-xl bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition active:scale-95">
                        <i class="fa-solid fa-calculator"></i> Tính ngay
                    </button>
                </div>

                <!-- Result Section -->
                <div id="results" class="hidden mt-8 animate-fade-in-up">
                    <div class="bg-indigo-50 border border-indigo-100 rounded-2xl p-6 text-center">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-2">Tổng điểm NIHSS</h3>
                        <div id="nihss-score-display" class="text-5xl font-extrabold text-indigo-600 mb-4">0</div>
                        
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                            <p class="text-gray-500 text-xs font-semibold uppercase mb-1">Phân loại</p>
                            <p id="severity-text" class="text-xl font-bold text-gray-800"></p>
                        </div>

                        <!-- Reference -->
                        <div class="mt-4 pt-4 border-t border-indigo-100 text-left">
                            <p class="font-bold text-sm text-gray-700 mb-2">Tham khảo:</p>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm">
                                <div class="flex justify-between p-2 bg-white rounded border border-gray-100"><span class="text-green-600 font-bold">0</span> <span class="text-gray-600">Không đột quỵ</span></div>
                                <div class="flex justify-between p-2 bg-white rounded border border-gray-100"><span class="text-green-600 font-bold">1 - 4</span> <span class="text-gray-600">Đột quỵ nhẹ</span></div>
                                <div class="flex justify-between p-2 bg-white rounded border border-gray-100"><span class="text-yellow-600 font-bold">5 - 15</span> <span class="text-gray-600">Trung bình</span></div>
                                <div class="flex justify-between p-2 bg-white rounded border border-gray-100"><span class="text-orange-600 font-bold">16 - 20</span> <span class="text-gray-600">TB - Nặng</span></div>
                                <div class="flex justify-between p-2 bg-white rounded border border-gray-100"><span class="text-red-600 font-bold">21 - 42</span> <span class="text-gray-600">Đột quỵ nặng</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mô tả ngắn & Disclaimer dưới cùng -->
                <div class="mt-8 pt-6 border-t border-gray-100">
                    <p class="text-xs text-gray-500 text-center italic max-w-2xl mx-auto leading-relaxed">
                        * Thang điểm NIHSS (National Institutes of Health Stroke Scale) là công cụ tiêu chuẩn để đánh giá định lượng mức độ suy giảm thần kinh trong đột quỵ cấp. Kết quả tính toán chỉ mang tính chất tham khảo và hỗ trợ chuyên môn, không thay thế cho chẩn đoán và quyết định lâm sàng của bác sĩ.
                    </p>
                </div>

            </div>
        </div>
    </main>

    <!-- DRAWER MENU -->
    <div id="drawer-overlay" onclick="closeDrawer()" class="fixed inset-0 bg-black/50 z-[60] hidden transition-opacity opacity-0"></div>
    <div id="drawer-menu" class="fixed top-0 right-0 h-full w-72 bg-white shadow-2xl z-[70] transform transition-transform translate-x-full duration-300 ease-in-out flex flex-col">
        <div class="p-5 flex justify-between items-center border-b border-gray-100 bg-gray-50">
            <h2 class="font-bold text-xl text-gray-800">Menu</h2>
            <button onclick="closeDrawer()" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 text-gray-500 transition"><i class="fa-solid fa-xmark text-lg"></i></button>
        </div>
        <div class="p-4 flex flex-col gap-2 overflow-y-auto flex-1">
            <a href="gioi-thieu.html" class="flex items-center gap-4 p-3 hover:bg-teal-50 hover:text-teal-600 rounded-xl transition group text-gray-700">
                <div class="w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center text-teal-600 group-hover:scale-110 transition"><i class="fa-solid fa-circle-info"></i></div>
                <span class="font-medium">Giới thiệu</span>
            </a>
            <a href="lien-he.html" class="flex items-center gap-4 p-3 hover:bg-green-50 hover:text-green-600 rounded-xl transition group text-gray-700">
                <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600 group-hover:scale-110 transition"><i class="fa-solid fa-envelope"></i></div>
                <span class="font-medium">Liên hệ</span>
            </a>
            <a href="dieu-khoan-dich-vu.html" class="flex items-center gap-4 p-3 hover:bg-blue-50 hover:text-blue-600 rounded-xl transition group text-gray-700">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 group-hover:scale-110 transition"><i class="fa-solid fa-file-contract"></i></div>
                <span class="font-medium">Điều khoản</span>
            </a>
            <a href="chinh-sach-bao-mat.html" class="flex items-center gap-4 p-3 hover:bg-purple-50 hover:text-purple-600 rounded-xl transition group text-gray-700">
                <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 group-hover:scale-110 transition"><i class="fa-solid fa-shield-halved"></i></div>
                <span class="font-medium">Chính sách</span>
            </a>
            <div class="my-2 border-t border-gray-100"></div>
            <a href="ung-ho.html" class="flex items-center gap-4 p-3 hover:bg-rose-50 hover:text-rose-600 rounded-xl transition group text-gray-700">
                <div class="w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center text-rose-600 group-hover:scale-110 transition"><i class="fa-solid fa-heart"></i></div>
                <span class="font-medium">Ủng hộ</span>
            </a>
        </div>
    </div>

    <!-- MOBILE BOTTOM NAV -->
    <nav class="md:hidden fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-100 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
        <div class="grid h-full max-w-lg grid-cols-3 mx-auto font-medium">
            <a href="index.html" class="nav-item text-gray-500 inline-flex flex-col items-center justify-center px-5 group hover:text-teal-600">
                <i class="fa-solid fa-house text-xl mb-1 group-hover:text-teal-600"></i>
                <span class="text-[10px] group-hover:text-teal-600">Trang chủ</span>
            </a>
            <a href="cong-cu.html" class="nav-item active text-teal-600 inline-flex flex-col items-center justify-center px-5 group">
                <i class="fa-solid fa-calculator text-xl mb-1"></i>
                <span class="text-[10px]">Công cụ</span>
            </a>
            <button type="button" onclick="openDrawer(event)" class="nav-item text-gray-500 inline-flex flex-col items-center justify-center px-5 group hover:text-teal-600">
                <i class="fa-solid fa-bars text-xl mb-1 group-hover:text-teal-600"></i>
                <span class="text-[10px] group-hover:text-teal-600">Khác</span>
            </button>
        </div>
    </nav>

    <!-- NOTIFICATION MODAL -->
    <div id="notification-modal" class="fixed inset-0 flex items-center justify-center z-[80] hidden">
        <div class="absolute inset-0 bg-black/50 transition-opacity" onclick="hideModal()"></div>
        <div class="bg-white rounded-xl shadow-xl p-6 relative z-10 w-11/12 max-w-sm text-center transform transition-all scale-100 animate-fade-in-up">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
                <i class="fa-solid fa-triangle-exclamation text-red-600 text-xl"></i>
            </div>
            <h3 class="text-lg font-bold text-gray-900 mb-2">Thông báo</h3>
            <p id="modal-message" class="text-sm text-gray-500 mb-6">Nội dung thông báo...</p>
            <button onclick="hideModal()" class="w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none transition">
                Đóng
            </button>
        </div>
    </div>

    <script>
        // --- 1. LOGIC LƯU LỊCH SỬ ---
        function useTool(id, name, icon, color, url) {
            let recentTools = JSON.parse(localStorage.getItem('recentTools')) || [];
            recentTools = recentTools.filter(tool => tool.id !== id);
            recentTools.unshift({
                id: id,
                name: name,
                icon: icon,
                color: color,
                url: url,
                timestamp: new Date().getTime()
            });
            if (recentTools.length > 5) recentTools.pop();
            localStorage.setItem('recentTools', JSON.stringify(recentTools));
        }

        // --- 2. LOGIC DRAWER MENU ---
        function openDrawer(e) {
            if(e) e.preventDefault();
            const drawer = document.getElementById('drawer-menu');
            const overlay = document.getElementById('drawer-overlay');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.remove('opacity-0'), 10);
            drawer.classList.remove('translate-x-full');
            document.body.style.overflow = 'hidden';
        }

        function closeDrawer() {
            const drawer = document.getElementById('drawer-menu');
            const overlay = document.getElementById('drawer-overlay');
            drawer.classList.add('translate-x-full');
            overlay.classList.add('opacity-0');
            setTimeout(() => {
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        // --- 3. LOGIC MODAL ---
        const modal = document.getElementById('notification-modal');
        const modalMessage = document.getElementById('modal-message');

        window.showModal = function(message) {
            if(modal && modalMessage) {
                modalMessage.textContent = message;
                modal.classList.remove('hidden');
            }
        }

        window.hideModal = function() {
            if(modal) modal.classList.add('hidden');
        }

        // --- 4. LOGIC NIHSS ---
        function calculateNIHSS() {
            let totalScore = 0;
            const ids = [
                'nihss1a', 'nihss1b', 'nihss1c', 'nihss2', 'nihss3', 'nihss4', 
                'nihss5a', 'nihss5b', 'nihss6a', 'nihss6b', 'nihss7', 'nihss8', 
                'nihss9', 'nihss10', 'nihss11'
            ];

            let allSelected = true;
            ids.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    totalScore += parseInt(element.value) || 0;
                } else {
                    console.warn(`Element not found: ${id}`);
                }
            });

            let severity = '';
            let severityClass = '';

            if (totalScore === 0) {
                severity = 'Không đột quỵ';
                severityClass = 'text-green-600';
            } else if (totalScore <= 4) {
                severity = 'Đột quỵ nhẹ';
                severityClass = 'text-green-600';
            } else if (totalScore <= 15) {
                severity = 'Đột quỵ trung bình';
                severityClass = 'text-yellow-600';
            } else if (totalScore <= 20) {
                severity = 'Đột quỵ TB - nặng';
                severityClass = 'text-orange-600';
            } else {
                severity = 'Đột quỵ nặng';
                severityClass = 'text-red-600';
            }

            // Hiển thị kết quả
            const scoreDisplay = document.getElementById('nihss-score-display');
            const severityText = document.getElementById('severity-text');
            const resultsContainer = document.getElementById('results');

            if (scoreDisplay && severityText && resultsContainer) {
                scoreDisplay.textContent = totalScore;
                severityText.textContent = severity;
                severityText.className = `text-xl font-bold ${severityClass}`;
                
                resultsContainer.classList.remove('hidden');
                
                // Scroll xuống kết quả một cách mượt mà
                setTimeout(() => {
                    resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);

                // Lưu lịch sử
                useTool('nihss', 'Thang điểm NIHSS', 'fa-brain', 'text-indigo-600', window.location.href);
            }
        }

        function clearInputs() {
            document.querySelectorAll('select').forEach(select => {
                select.value = '0';
            });
            const resultsContainer = document.getElementById('results');
            if (resultsContainer) resultsContainer.classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- 5. BẢO MẬT & UX ---
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && (event.key === 'u' || event.key === 'U' || event.key === 's' || event.key === 'S' || event.key === 'p' || event.key === 'P')) {
                event.preventDefault();
            }
            if (event.keyCode === 123) { // F12
                event.preventDefault();
            }
        });
    </script>
</body>
</html>