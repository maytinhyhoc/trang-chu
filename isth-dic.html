<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<!-- Đã thêm user-scalable=no để chặn zoom trên mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Thang điểm ISTH chẩn đoán DIC</title>
<link rel="icon" href="https://raw.githubusercontent.com/maytinhyhoc/trang-chu/main/logo.png" type="image/png">
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/maytinhyhoc/trang-chu/main/logo.png">
<link rel="manifest" href="manifest.json">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
<style>
/* --- Mobile Optimization & Base Styles --- */
body {
font-family: 'Inter', sans-serif;
background-color: #f8fafc;
padding-top: 80px;
/* Ngăn bôi đen văn bản (App-like feel) */
-webkit-user-select: none;
user-select: none;

/* Loại bỏ độ trễ và màu highlight khi tap trên mobile */
touch-action: manipulation;
-webkit-tap-highlight-color: transparent;
}
/* Khôi phục khả năng select text cho input để nhập liệu */
input, textarea {
-webkit-user-select: text;
user-select: text;
}
@media (max-width: 767px) { body { padding-top: 0px; padding-bottom: 80px; } }
.nav-item-highlight { background-color: #eef2ff; border-radius: 9999px; padding: 4px 12px; color: #4f46e5; font-weight: 500; }
.bottom-nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px 4px; color: #6b7280; transition: color 0.2s; }
.bottom-nav-item.active { color: #4f46e5; }
.bottom-nav-item svg { width: 24px; height: 24px; margin-bottom: 2px; }
.bottom-nav-item span { font-size: 10px; font-weight: 500; }
.score-box { background-color: #eef2ff; color: #4f46e5; padding: 1rem 2rem; border-radius: 0.75rem; font-size: 2.5rem; font-weight: bold; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); text-align: center; border: 1px solid #c7d2fe; }
.result-text { font-size: 1.125rem; font-weight: 600; }
input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type="number"] { -moz-appearance: textfield; }
/* Animation cho Modal */
.modal-enter { opacity: 0; transform: scale(0.9); }
.modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 0.3s, transform 0.3s; }
.modal-exit { opacity: 1; transform: scale(1); }
.modal-exit-active { opacity: 0; transform: scale(0.9); transition: opacity 0.3s, transform 0.3s; }

/* Custom Radio Style */
.custom-radio:checked + label {
    background-color: #eef2ff;
    border-color: #6366f1;
    color: #4338ca;
}
.custom-radio:checked + label .check-icon {
    opacity: 1;
    transform: scale(1);
}
</style>
</head>
<body class="text-gray-800 flex flex-col min-h-screen">
<!-- HEADER DESKTOP -->
<header class="hidden md:block bg-white shadow-sm py-3 fixed top-0 w-full z-50">
<div class="container mx-auto px-4 header-content flex items-center justify-between">
<div class="flex items-center flex-shrink-0 w-auto">
<a href="index.html" class="logo-text text-3xl font-bold text-indigo-700 rounded-lg transition duration-300 hover:text-indigo-900">Máy tính y học</a>
</div>
<nav class="nav-menu flex space-x-4">
<a href="index.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Trang Chủ</a>
<a href="cong-cu.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 nav-item-highlight">Công Cụ</a>
<a href="gioi-thieu.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Giới thiệu</a>
<a href="#lien-he" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Liên Hệ</a>
</nav>
</div>
</header>
<main class="flex-grow container mx-auto px-4 py-4 md:py-8">
<div class="flex items-center justify-between mb-4 md:mb-6 pt-4 md:pt-0">
<a href="cong-cu.html" class="flex-shrink-0 inline-flex items-center justify-center w-10 h-10 bg-white border border-gray-200 rounded-full text-indigo-600 hover:bg-indigo-50 hover:border-indigo-200 transition duration-300 shadow-sm">
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
</a>
<h1 class="text-xl md:text-3xl font-bold text-center text-gray-800 flex-grow px-2">
Thang điểm ISTH chẩn đoán DIC
</h1>
<div class="w-10 h-10 flex-shrink-0"></div>
</div>
<div class="mt-2 md:mt-8 bg-white rounded-lg shadow-lg p-3 md:p-8 max-w-4xl mx-auto">
    <div class="bg-gray-50 p-4 sm:p-6 md:p-8 rounded-xl border border-gray-100">
        
        <!-- Form có novalidate để tắt bong bóng mặc định -->
        <form id="tool-form" class="space-y-8" novalidate>
            
            <!-- Question 1: Platelets -->
            <div>
                <label class="block text-base font-bold text-gray-700 mb-3"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-sm mr-2">1</span>Số lượng Tiểu cầu</label>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                    <div class="relative">
                        <input type="radio" name="platelets" id="plt_0" value="0" class="custom-radio peer sr-only">
                        <label for="plt_0" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">> 100 x 10⁹/L</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="platelets" id="plt_1" value="1" class="custom-radio peer sr-only">
                        <label for="plt_1" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">< 100 x 10⁹/L</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="platelets" id="plt_2" value="2" class="custom-radio peer sr-only">
                        <label for="plt_2" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">< 50 x 10⁹/L</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Question 2: D-Dimer/FDP -->
            <div>
                <label class="block text-base font-bold text-gray-700 mb-3"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-sm mr-2">2</span>Dấu ấn liên quan Fibrin (D-Dimer, FDP)</label>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                    <div class="relative">
                        <input type="radio" name="ddimer" id="ddimer_0" value="0" class="custom-radio peer sr-only">
                        <label for="ddimer_0" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">Không tăng</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="ddimer" id="ddimer_2" value="2" class="custom-radio peer sr-only">
                        <label for="ddimer_2" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">Tăng vừa</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="ddimer" id="ddimer_3" value="3" class="custom-radio peer sr-only">
                        <label for="ddimer_3" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">Tăng mạnh</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Question 3: PT Prolonged -->
            <div>
                <label class="block text-base font-bold text-gray-700 mb-3"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-sm mr-2">3</span>Thời gian Prothrombin kéo dài</label>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                    <div class="relative">
                        <input type="radio" name="pt" id="pt_0" value="0" class="custom-radio peer sr-only">
                        <label for="pt_0" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">< 3 giây</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="pt" id="pt_1" value="1" class="custom-radio peer sr-only">
                        <label for="pt_1" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">3 - 6 giây</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="pt" id="pt_2" value="2" class="custom-radio peer sr-only">
                        <label for="pt_2" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">> 6 giây</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Question 4: Fibrinogen -->
            <div>
                <label class="block text-base font-bold text-gray-700 mb-3"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-sm mr-2">4</span>Định lượng Fibrinogen</label>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <div class="relative">
                        <input type="radio" name="fibrinogen" id="fib_0" value="0" class="custom-radio peer sr-only">
                        <label for="fib_0" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">> 1.0 g/L</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="radio" name="fibrinogen" id="fib_1" value="1" class="custom-radio peer sr-only">
                        <label for="fib_1" class="flex items-center p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-all h-full">
                            <div class="flex-grow">
                                <div class="font-medium text-gray-900">< 1.0 g/L</div>
                            </div>
                            <div class="check-icon opacity-0 transform scale-50 transition-all duration-200 text-indigo-600">
                                <i class="fa-solid fa-circle-check text-xl"></i>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex flex-col sm:flex-row gap-4">
                <button type="submit" class="flex-1 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition duration-300 transform hover:-translate-y-0.5 hover:bg-indigo-700 flex items-center justify-center">
                    <i class="fa-solid fa-calculator mr-2"></i> Tính toán
                </button>
                <button type="button" id="clearBtn" class="flex-1 bg-white text-red-500 border border-red-200 font-bold py-3 px-6 rounded-lg shadow-sm hover:shadow-md transition duration-300 hover:bg-red-50 flex items-center justify-center">
                    <i class="fa-solid fa-trash-can mr-2"></i> Xóa Dữ Liệu
                </button>
            </div>
        </form>

        <div id="result-container" class="mt-8 hidden animate-fade-in-up">
            <div class="bg-indigo-50 border border-indigo-100 rounded-xl p-6 text-center shadow-inner">
                <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-3">Kết quả (ISTH)</h3>
                <div id="main-result" class="score-box mb-4 bg-white text-5xl text-indigo-700">--</div>
                <p id="sub-result" class="result-text text-indigo-700 leading-relaxed">...</p>
            </div>
        </div>

        <div class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 text-sm rounded-r-md">
            <i class="fa-solid fa-triangle-exclamation mr-2"></i> <strong>Lưu ý:</strong> Thang điểm chỉ áp dụng cho bệnh nhân có bệnh lý nền được biết đến là có nguy cơ gây DIC (nhiễm trùng huyết, đa chấn thương, ung thư, biến chứng sản khoa...).
        </div>
    </div>
</div>
</main>
<!-- CUSTOM MODAL -->
<div id="notification-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
<div class="absolute inset-0 bg-black opacity-50 transition-opacity"></div>
<div class="bg-white rounded-lg shadow-xl p-6 relative z-10 w-11/12 max-w-sm text-center transform transition-all scale-100">
<div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
<svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
</svg>
</div>
<h3 class="text-lg leading-6 font-medium text-gray-900 mb-2">Thông báo</h3>
<p id="modal-message" class="text-sm text-gray-500 mb-6">Vui lòng chọn đủ mục.</p>
<button id="close-modal-btn" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm">
Đóng
</button>
</div>
</div>
<footer id="lien-he" class="bg-gray-800 text-white py-4 md:py-8 text-center rounded-t-lg shadow-inner">
<div class="container mx-auto px-4">
<!-- Dòng bản quyền: Ẩn bớt text thừa trên mobile -->
<p class="text-xs md:text-base">&copy; 2025 Máy tính y học<span class="hidden md:inline">. Mọi quyền được bảo lưu.</span></p>
    <!-- Thông tin liên hệ: Chữ nhỏ hơn, rút gọn nội dung trên mobile -->
    <div class="mt-1 md:mt-2 text-xs md:text-base text-gray-400 md:text-white">
        <!-- Hiện trên Mobile -->
        <p class="md:hidden">BS. Nguyễn Duy Toàn - BVĐK Lâm Đồng</p>
        <!-- Hiện trên Desktop -->
        <p class="hidden md:block">Liên hệ: BS. Nguyễn Duy Toàn - Bệnh viện đa khoa Lâm Đồng</p>
        
        <p class="mt-0.5 md:mt-1">
            <span class="hidden md:inline">Email: </span><a href="mailto:toannguyen284@gmail.com" class="text-indigo-400 hover:text-white transition duration-300">toannguyen284@gmail.com</a>
        </p>
    </div>

    <!-- Links: Rút gọn tên và thêm dấu gạch phân cách -->
    <div class="flex justify-center space-x-3 md:space-x-4 mt-2 md:mt-4 text-xs md:text-base">
        <a href="chinh-sach-bao-mat.html" class="text-gray-400 hover:text-white transition duration-300">Bảo mật</a>
        <span class="text-gray-600 md:hidden">|</span>
        <a href="dieu-khoan-dich-vu.html" class="text-gray-400 hover:text-white transition duration-300">Điều khoản</a>
    </div>
</div>
</footer>
<nav class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 shadow-[0_-2px_10px_rgba(0,0,0,0.1)] z-50 flex justify-around py-2 pb-safe md:hidden">
<a href="index.html" class="bottom-nav-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg><span>Trang Chủ</span></a>
<a href="cong-cu.html" class="bottom-nav-item active"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg><span>Công Cụ</span></a>
<a href="gioi-thieu.html" class="bottom-nav-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg><span>Giới thiệu</span></a>
<a href="#lien-he" class="bottom-nav-item"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></svg><span>Liên Hệ</span></a>
</nav>
<script>
document.addEventListener('DOMContentLoaded', function() {
// --- LAYOUT ADJUSTMENT (KHÔNG ĐƯỢC XOÁ) ---
const header = document.querySelector('header');
const body = document.body;
function adjustBodyPadding() {
if (header && getComputedStyle(header).display !== 'none') {
body.style.paddingTop = header.offsetHeight + 'px';
} else { body.style.paddingTop = '0px'; }
}
adjustBodyPadding();
window.addEventListener('resize', adjustBodyPadding);
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('dblclick', () => { input.value = ''; });
    });

    // --- MODAL LOGIC (GIỮ NGUYÊN) ---
    const modal = document.getElementById('notification-modal');
    const modalMessage = document.getElementById('modal-message');
    const closeModalBtn = document.getElementById('close-modal-btn');

    window.showModal = function(message) {
        modalMessage.textContent = message;
        modal.classList.remove('hidden');
    }

    function hideModal() {
        modal.classList.add('hidden');
    }

    closeModalBtn.addEventListener('click', hideModal);
    modal.addEventListener('click', function(e) {
        if (e.target === modal.querySelector('.absolute')) {
            hideModal();
        }
    });

    // --- LOGIC TÍNH TOÁN ISTH DIC ---
    const form = document.getElementById('tool-form');
    const resultContainer = document.getElementById('result-container');
    const mainResult = document.getElementById('main-result');
    const subResult = document.getElementById('sub-result');
    const clearBtn = document.getElementById('clearBtn');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 1. VALIDATION
        const platelets = document.querySelector('input[name="platelets"]:checked');
        const ddimer = document.querySelector('input[name="ddimer"]:checked');
        const pt = document.querySelector('input[name="pt"]:checked');
        const fibrinogen = document.querySelector('input[name="fibrinogen"]:checked');

        if (!platelets || !ddimer || !pt || !fibrinogen) {
            showModal("Vui lòng chọn đầy đủ 4 tiêu chí để tính toán.");
            return;
        }

        // 2. CALCULATION
        let score = 0;
        score += parseInt(platelets.value);
        score += parseInt(ddimer.value);
        score += parseInt(pt.value);
        score += parseInt(fibrinogen.value);

        // 3. SHOW RESULT
        let interpretation = "";
        let colorClass = "text-indigo-700";

        if (score >= 5) {
            interpretation = "Tương thích với chẩn đoán Đông máu nội mạch lan tỏa (DIC) điển hình.";
            mainResult.style.color = "#dc2626"; // Red for danger
            subResult.style.color = "#dc2626";
        } else {
            interpretation = "Chưa đủ tiêu chuẩn chẩn đoán DIC điển hình. Có thể là giai đoạn chưa điển hình (tiềm tàng), cần theo dõi thêm.";
            mainResult.style.color = "#4f46e5"; // Indigo for normal
            subResult.style.color = "#4f46e5";
        }

        mainResult.textContent = score + " Điểm";
        subResult.textContent = interpretation;
        
        resultContainer.classList.remove('hidden');
        
        // Auto Scroll
        const headerHeight = document.querySelector('header')?.offsetHeight || 0;
        const targetPos = resultContainer.getBoundingClientRect().top + window.pageYOffset - headerHeight - 20;
        window.scrollTo({ top: targetPos, behavior: 'smooth' });
    });

    clearBtn.addEventListener('click', function() {
        form.reset();
        resultContainer.classList.add('hidden');
        mainResult.textContent = "--";
    });
});
</script>
</body>
</html>
