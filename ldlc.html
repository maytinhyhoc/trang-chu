<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≠nh & Ph√¢n lo·∫°i LDLc - M√°y t√≠nh y h·ªçc</title>
    <!-- T·∫£i Tailwind CSS t·ª´ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* M√†u n·ªÅn nh·∫π */
            padding-top: 130px; /* ƒêi·ªÅu ch·ªânh padding-top ban ƒë·∫ßu, s·∫Ω ƒë∆∞·ª£c JS t√≠nh to√°n l·∫°i */
            color: #1e293b; /* Darker text for better contrast */
        }
        /* T√πy ch·ªânh nh·ªè cho c√°c ph·∫ßn t·ª≠ */
        .gradient-bg {
            background: linear-gradient(to right, #6366f1, #a855f7); /* M√†u t√≠m xanh */
        }
        .active-link {
            background-color: #e0e7ff; /* M√†u n·ªÅn khi active */
            color: #4f46e5; /* M√†u ch·ªØ khi active */
            font-weight: 600;
        }
        /* Th√™m cu·ªôn ngang cho thanh nav tr√™n mobile */
        .nav-scrollable {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* Cho cu·ªôn m∆∞·ª£t m√† tr√™n iOS */
            scrollbar-width: none; /* ·∫®n scrollbar tr√™n Firefox */
        }
        .nav-scrollable::-webkit-scrollbar {
            display: none; /* ·∫®n scrollbar tr√™n Chrome/Safari */
        }
        .score-box {
            background-color: #e0e7ff;
            color: #4f46e5;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 2.5rem; /* Main result score font size */
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .result-text {
            font-size: 1.125rem; /* Adjusted for better consistency */
            font-weight: 600;
        }
        .input-group label {
            font-size: 0.95rem; /* Slightly larger for better readability */
        }
        input[type="number"] {
            font-size: 1rem; /* Consistent input font size */
        }
        input[type="radio"] + span {
            font-size: 0.95rem; /* Consistent radio label font size */
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        /* Responsive adjustments for mobile */
        @media (max-width: 767px) { /* Tailwind's 'md' breakpoint is 768px */
            header .logo-text {
                display: none; /* ·∫®n logo tr√™n mobile */
            }
            .header-content {
                flex-direction: column; /* S·∫Øp x·∫øp theo c·ªôt tr√™n mobile */
                align-items: center; /* CƒÉn gi·ªØa c√°c m·ª•c tr√™n mobile */
                gap: 0.5rem; /* Gi·∫£m kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn */
            }
            .nav-menu {
                justify-content: center; /* CƒÉn gi·ªØa menu tr√™n mobile */
                flex-wrap: nowrap; /* Kh√¥ng xu·ªëng d√≤ng c√°c link nav */
                padding-bottom: 0.5rem; /* Kho·∫£ng c√°ch v·ªõi thanh t√¨m ki·∫øm */
                width: 100%; /* ƒê·∫£m b·∫£o menu chi·∫øm ƒë·ªß chi·ªÅu r·ªông ƒë·ªÉ cu·ªôn */
            }
            .search-bar-container {
                width: calc(100% - 2rem); /* Chi·ªÅu r·ªông full tr·ª´ padding ngang */
                padding-left: 0; /* B·ªè padding ngang ·ªü ƒë√¢y v√¨ ƒë√£ t√≠nh v√†o width */
                padding-right: 0;
                margin-top: 0.5rem; /* Kho·∫£ng c√°ch v·ªõi thanh nav */
                margin-left: auto; /* CƒÉn gi·ªØa */
                margin-right: auto; /* CƒÉn gi·ªØa */
            }
            body {
                padding-top: 100px; /* Adjusted padding for mobile, will be set precisely by JS */
            }
            .lipid-input-grid {
                grid-template-columns: 1fr; /* Stack columns on small screens */
            }
            .lipid-input-grid .label-col {
                text-align: left; /* Align labels to left on small screens */
            }
            /* Make direct input row behave similarly to lipid-input-grid */
            .direct-input-group {
                grid-template-columns: 1fr; /* Stack on mobile by default */
            }
            .direct-input-group .label-col {
                 text-align: left;
            }
        }
        /* S·ª≠a l·ªói zoom khi b·∫•m v√†o thanh t√¨m ki·∫øm tr√™n mobile */
        #toolSearch {
            font-size: 16px; /* ƒê·∫£m b·∫£o font size t·ªëi thi·ªÉu 16px ƒë·ªÉ ngƒÉn zoom t·ª± ƒë·ªông */
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header Section (combined navigation and search bar, fixed at top) -->
    <header class="bg-white shadow-md py-3 fixed top-0 w-full z-20">
        <!-- Main header content container, flex direction changes based on screen size -->
        <div class="container mx-auto px-4 header-content flex flex-col md:flex-row md:justify-between md:items-center">
            <!-- Logo/T√™n trang web -->
            <div class="flex items-center mb-0 md:flex-shrink-0 md:order-1">
                <a href="#" class="logo-text text-2xl font-bold text-indigo-700 rounded-lg transition duration-300 hover:text-indigo-900 md:text-3xl">
                    M√°y t√≠nh y h·ªçc
                </a>
            </div>

            <!-- Navigation Menu -->
            <nav class="nav-menu flex space-x-2 md:space-x-4 w-full md:w-auto nav-scrollable md:order-3 md:flex-shrink-0">
                <a href="index.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Trang Ch·ªß</a>
                <a href="cong-cu.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100 active-link">C√¥ng C·ª•</a>
                <a href="gioi-thieu.html" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Gi·ªõi thi·ªáu</a>
                <a href="#lien-he" class="flex-shrink-0 text-base font-medium text-gray-700 hover:text-indigo-600 transition duration-300 px-3 py-1 rounded-full hover:bg-gray-100">Li√™n H·ªá</a>
            </nav>

            <!-- Search Bar -->
            <div class="search-bar-container w-full max-w-sm md:max-w-xs md:mx-4 md:order-2 md:flex-grow">
                <input type="text" id="toolSearch" placeholder="T√¨m ki·∫øm..." class="w-full p-2 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm">
            </div>
        </div>
    </header>

    <section class="py-4 md:py-8 bg-white rounded-lg shadow-inner mx-4 mt-4 md:mx-auto md:mt-8 md:max-w-4xl">
        <div class="container mx-auto px-2 sm:px-4">
            <a href="cong-cu.html" class="block w-max mb-2 bg-indigo-100 p-1 rounded-full text-indigo-700 hover:bg-indigo-200 transition duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </a>
            <h1 class="text-xl md:text-3xl font-bold text-center text-gray-800 mb-4">
                T√≠nh & Ph√¢n lo·∫°i LDLc theo ESC/EAS
            </h1>

            <div class="bg-gray-50 p-4 sm:p-6 md:p-8 rounded-xl shadow-lg">
                <div class="flex justify-center space-x-4 mb-6">
                    <button id="direct-input-btn" type="button" class="px-6 py-3 rounded-full font-semibold transition duration-300 hover:bg-indigo-700 shadow-md cursor-pointer">
                        Nh·∫≠p LDLc
                    </button>
                    <button id="calculate-ldlc-btn" type="button" class="px-6 py-3 rounded-full font-semibold transition duration-300 hover:bg-gray-300 shadow-sm cursor-pointer">
                        T√≠nh LDLc
                    </button>
                </div>

                <!-- Form nh·∫≠p LDLc tr·ª±c ti·∫øp -->
                <form id="direct-ldlc-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-[1fr_2fr] gap-4 items-center direct-input-group">
                        <label for="ldlc-direct" class="block text-sm font-medium text-gray-700 label-col">LDLc</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="ldlc-direct" name="ldlc-direct" min="0" step="0.01" required
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                   inputmode="decimal">
                            <select id="ldlc-unit-direct" name="ldlc-unit-direct" class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                <option value="mmol/L">mmol/L</option>
                                <option value="mg/dL">mg/dL</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ph√¢n t·∫ßng nguy c∆° tim m·∫°ch</label>
                        <div class="p-4 bg-gray-100 rounded-lg border border-gray-200 mb-4 text-sm text-gray-700">
                             <p class="font-semibold mb-1">Ti√™u ch√≠ ph√¢n t·∫ßng nguy c∆° tim m·∫°ch theo ESC/EAS 2021:</p>
                                <ul class="list-disc list-inside space-y-1">
                                    <li><strong class="text-red-600">R·∫•t cao:</strong> B·ªánh tim m·∫°ch x∆° v·ªØa (ASCVD) ƒë√£ ƒë∆∞·ª£c x√°c ƒë·ªãnh l√¢m s√†ng (ti·ªÅn s·ª≠ nh·ªìi m√°u c∆° tim, ƒë·ªôt qu·ªµ, b·ªánh ƒë·ªông m·∫°ch ngo·∫°i bi√™n, v.v.), ƒë√°i th√°o ƒë∆∞·ªùng c√≥ t·ªïn th∆∞∆°ng c∆° quan ƒë√≠ch ho·∫∑c √≠t nh·∫•t 3 y·∫øu t·ªë nguy c∆° ch√≠nh, b·ªánh th·∫≠n m·∫°n Giai ƒëo·∫°n 3b-5, tƒÉng cholesterol gia ƒë√¨nh v·ªõi ASCVD ho·∫∑c 1 y·∫øu t·ªë nguy c∆° ch√≠nh kh√°c.</li>
                                    <li><strong class="text-orange-500">Cao:</strong> TƒÉng cholesterol gia ƒë√¨nh kh√¥ng c√≥ ASCVD ho·∫∑c y·∫øu t·ªë nguy c∆° ch√≠nh kh√°c, tƒÉng huy·∫øt √°p ƒë·ªô 3, ƒë√°i th√°o ƒë∆∞·ªùng ‚â• 10 nƒÉm ho·∫∑c c√≥ 1 y·∫øu t·ªë nguy c∆° kh√°c, b·ªánh th·∫≠n m·∫°n Giai ƒëo·∫°n 3a, ƒëi·ªÉm SCORE ‚â• 5% v√† &lt; 10% (nguy c∆° t·ª≠ vong 10 nƒÉm).</li>
                                    <li><strong class="text-yellow-600">Trung b√¨nh:</strong> B·ªánh nh√¢n tr·∫ª tu·ªïi (ƒêTƒê type 1 &lt; 35 tu·ªïi, ƒêTƒê type 2 &lt; 50 tu·ªïi) v·ªõi th·ªùi gian m·∫Øc ƒêTƒê &lt; 10 nƒÉm v√† kh√¥ng c√≥ y·∫øu t·ªë nguy c∆°. ƒêi·ªÉm SCORE ‚â• 1% v√† &lt; 5%.</li>
                                    <li><strong class="text-green-600">Th·∫•p:</strong> ƒêi·ªÉm SCORE &lt; 1%.</li>
                                </ul>
                        </div>
                        <div class="mt-2 space-y-2">
                            <label class="block text-sm font-medium text-gray-700">Ch·ªçn m·ª©c ƒë·ªô nguy c∆° c·ªßa b·∫°n:</label>
                            <div class="flex items-center">
                                <input type="radio" id="risk-very-high" name="risk-category" value="very-high" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300" checked>
                                <label for="risk-very-high" class="ml-3 block text-sm font-medium text-gray-700">R·∫•t cao</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-high" name="risk-category" value="high" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-high" class="ml-3 block text-sm font-medium text-gray-700">Cao</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-moderate" name="risk-category" value="moderate" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-moderate" class="ml-3 block text-sm font-medium text-gray-700">Trung b√¨nh</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-low" name="risk-category" value="low" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-low" class="ml-3 block text-sm font-medium text-gray-700">Th·∫•p</label>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex flex-col md:flex-row gap-4">
                        <button type="submit" id="calculate-direct-btn" class="flex-1 bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 hover:bg-indigo-700">
                            Ph√¢n lo·∫°i & Khuy·∫øn c√°o
                        </button>
                        <button type="button" id="clear-direct-btn" class="flex-1 bg-red-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 hover:bg-red-600">
                            X√≥a D·ªØ Li·ªáu
                        </button>
                    </div>
                </form>

                <!-- Form t√≠nh LDLc t·ª´ c√°c ch·ªâ s·ªë kh√°c -->
                <form id="calculate-ldlc-form" class="space-y-6 hidden">
                    
                    <div class="grid grid-cols-1 md:grid-cols-[1fr_2fr] gap-4 items-center lipid-input-grid">
                        <!-- Total Cholesterol (TC) -->
                        <label for="tc-value" class="block text-sm font-medium text-gray-700 label-col">Total Cholesterol (TC)</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="tc-value" name="tc-value" min="0" step="0.01" required
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                   inputmode="decimal">
                            <select id="tc-unit" name="tc-unit" class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                <option value="mmol/L">mmol/L</option>
                                <option value="mg/dL">mg/dL</option>
                            </select>
                        </div>

                        <!-- HDL Cholesterol (HDLc) -->
                        <label for="hdlc-value" class="block text-sm font-medium text-gray-700 label-col">HDL Cholesterol (HDLc)</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="hdlc-value" name="hdlc-value" min="0" step="0.01" required
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                   inputmode="decimal">
                            <select id="hdlc-unit" name="hdlc-unit" class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                <option value="mmol/L">mmol/L</option>
                                <option value="mg/dL">mg/dL</option>
                            </select>
                        </div>

                        <!-- Triglyceride (TG) -->
                        <label for="tg-value" class="block text-sm font-medium text-gray-700 label-col">Triglyceride (TG)</label>
                        <div class="flex items-center gap-2">
                            <input type="number" id="tg-value" name="tg-value" min="0" step="0.01" required
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                   inputmode="decimal">
                            <select id="tg-unit" name="tg-unit" class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                <option value="mmol/L">mmol/L</option>
                                <option value="mg/dL">mg/dL</option>
                            </select>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4 italic mt-4">S·ª≠ d·ª•ng c√¥ng th·ª©c Friedewald: LDLc = TC - HDLc - (TG/2.2) khi ƒë∆°n v·ªã l√† mmol/L, ho·∫∑c LDLc = TC - HDLc - (TG/5) khi ƒë∆°n v·ªã l√† mg/dL. C√¥ng th·ª©c n√†y kh√¥ng √°p d·ª•ng khi Triglyceride > 4.5 mmol/L (ho·∫∑c > 400 mg/dL).</p>
                    
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ph√¢n t·∫ßng nguy c∆° tim m·∫°ch</label>
                        <div class="p-4 bg-gray-100 rounded-lg border border-gray-200 mb-4 text-sm text-gray-700">
                            <p class="font-semibold mb-1">Ti√™u ch√≠ ph√¢n t·∫ßng nguy c∆° tim m·∫°ch theo ESC/EAS 2021:</p>
                                <ul class="list-disc list-inside space-y-1">
                                    <li><strong class="text-red-600">R·∫•t cao:</strong> B·ªánh tim m·∫°ch x∆° v·ªØa (ASCVD) ƒë√£ ƒë∆∞·ª£c x√°c ƒë·ªãnh l√¢m s√†ng (ti·ªÅn s·ª≠ nh·ªìi m√°u c∆° tim, ƒë·ªôt qu·ªµ, b·ªánh ƒë·ªông m·∫°ch ngo·∫°i bi√™n, v.v.), ƒë√°i th√°o ƒë∆∞·ªùng c√≥ t·ªïn th∆∞∆°ng c∆° quan ƒë√≠ch ho·∫∑c √≠t nh·∫•t 3 y·∫øu t·ªë nguy c∆° ch√≠nh, b·ªánh th·∫≠n m·∫°n Giai ƒëo·∫°n 3b-5, tƒÉng cholesterol gia ƒë√¨nh v·ªõi ASCVD ho·∫∑c 1 y·∫øu t·ªë nguy c∆° ch√≠nh kh√°c.</li>
                                    <li><strong class="text-orange-500">Cao:</strong> TƒÉng cholesterol gia ƒë√¨nh kh√¥ng c√≥ ASCVD ho·∫∑c y·∫øu t·ªë nguy c∆° ch√≠nh kh√°c, tƒÉng huy·∫øt √°p ƒë·ªô 3, ƒë√°i th√°o ƒë∆∞·ªùng ‚â• 10 nƒÉm ho·∫∑c c√≥ 1 y·∫øu t·ªë nguy c∆° kh√°c, b·ªánh th·∫≠n m·∫°n Giai ƒëo·∫°n 3a, ƒëi·ªÉm SCORE ‚â• 5% v√† &lt; 10% (nguy c∆° t·ª≠ vong 10 nƒÉm).</li>
                                    <li><strong class="text-yellow-600">Trung b√¨nh:</strong> B·ªánh nh√¢n tr·∫ª tu·ªïi (ƒêTƒê type 1 &lt; 35 tu·ªïi, ƒêTƒê type 2 &lt; 50 tu·ªïi) v·ªõi th·ªùi gian m·∫Øc ƒêTƒê &lt; 10 nƒÉm v√† kh√¥ng c√≥ y·∫øu t·ªë nguy c∆°. ƒêi·ªÉm SCORE ‚â• 1% v√† &lt; 5%.</li>
                                    <li><strong class="text-green-600">Th·∫•p:</strong> ƒêi·ªÉm SCORE &lt; 1%.</li>
                                </ul>
                        </div>
                        <div class="mt-2 space-y-2">
                            <label class="block text-sm font-medium text-gray-700">Ch·ªçn m·ª©c ƒë·ªô nguy c∆° c·ªßa b·∫°n:</label>
                            <div class="flex items-center">
                                <input type="radio" id="risk-very-high-calc" name="risk-category-calc" value="very-high" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300" checked>
                                <label for="risk-very-high-calc" class="ml-3 block text-sm font-medium text-gray-700">R·∫•t cao</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-high-calc" name="risk-category-calc" value="high" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-high-calc" class="ml-3 block text-sm font-medium text-gray-700">Cao</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-moderate-calc" name="risk-category-calc" value="moderate" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-moderate-calc" class="ml-3 block text-sm font-medium text-gray-700">Trung b√¨nh</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="risk-low-calc" name="risk-category-calc" value="low" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300">
                                <label for="risk-low-calc" class="ml-3 block text-sm font-medium text-gray-700">Th·∫•p</label>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex flex-col md:flex-row gap-4">
                        <button type="submit" id="calculate-ldlc-full-btn" class="flex-1 bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 hover:bg-indigo-700">
                            T√≠nh LDLc & Ph√¢n lo·∫°i
                        </button>
                        <button type="button" id="clear-calculate-ldlc-btn" class="flex-1 bg-red-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 hover:bg-red-600">
                            X√≥a D·ªØ Li·ªáu
                        </button>
                    </div>
                </form>

                <div id="result-container" class="mt-8 p-4 sm:p-6 bg-gray-100 border border-gray-200 rounded-xl text-gray-700 leading-relaxed shadow-inner hidden">
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800 text-center mb-6">K·∫øt qu·∫£ LDLc & Khuy·∫øn c√°o</h3>
                    <div class="flex flex-col md:flex-row justify-center items-center md:space-x-8 space-y-8 md:space-y-0">
                        <div class="w-full md:w-auto flex-1 text-center">
                            <p class="text-base md:text-lg font-medium text-gray-600 mb-2">Gi√° tr·ªã LDLc</p>
                            <div id="ldlc-display" class="score-box">0.00 mmol/L</div>
                        </div>
                    </div>
                    <div class="mt-6 text-center">
                         <p class="text-base md:text-lg font-medium text-gray-600 mb-2">Ph√¢n lo·∫°i & Khuy·∫øn c√°o</p>
                        <p id="recommendation-text" class="result-text text-indigo-700">Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c th√¥ng tin ƒë·ªÉ t√≠nh to√°n.</p>
                        <p id="warning-text" class="result-text text-red-500 mt-2 hidden"></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer id="lien-he" class="bg-gray-800 text-white py-8 text-center rounded-t-lg shadow-inner">
        <div class="container mx-auto px-4">
            <p>&copy; 2025 M√°y t√≠nh y h·ªçc. M·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
            <p class="mt-2">
                Li√™n h·ªá: BS. Nguy·ªÖn Duy To√†n - B·ªánh vi·ªán ƒëa khoa L√¢m ƒê·ªìng
            </p>
            <p>
                Email: <a href="mailto:toannguyen284@gmail.com" class="text-indigo-400 hover:text-white transition duration-300">toannguyen284@gmail.com</a>
            </p>
            <div class="flex justify-center space-x-4 mt-4">
                <a href="chinh-sach-bao-mat.html" class="text-gray-400 hover:text-white transition duration-300">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                <a href="dieu-khoan-dich-vu.html" class="text-gray-400 hover:text-white transition duration-300">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // JavaScript to dynamically adjust body padding based on fixed header height
            const header = document.querySelector('header');
            const body = document.body;

            function adjustBodyPadding() {
                const headerHeight = header.offsetHeight;
                body.style.paddingTop = `${headerHeight}px`;
            }

            adjustBodyPadding();
            window.addEventListener('resize', adjustBodyPadding);

            // Element selectors
            const directInputBtn = document.getElementById('direct-input-btn');
            const calculateLdlcBtn = document.getElementById('calculate-ldlc-btn');
            const directLdlcForm = document.getElementById('direct-ldlc-form');
            const calculateLdlcForm = document.getElementById('calculate-ldlc-form');
            const resultContainer = document.getElementById('result-container');
            const ldlcDisplay = document.getElementById('ldlc-display');
            const recommendationText = document.getElementById('recommendation-text');
            const warningText = document.getElementById('warning-text');

            const ldlcDirectInput = document.getElementById('ldlc-direct');
            const ldlcUnitDirectSelect = document.getElementById('ldlc-unit-direct');
            const riskCategoryDirectRadios = document.querySelectorAll('input[name="risk-category"]');
            const clearDirectBtn = document.getElementById('clear-direct-btn');

            const tcValueInput = document.getElementById('tc-value');
            const hdlcValueInput = document.getElementById('hdlc-value');
            const tgValueInput = document.getElementById('tg-value');
            const tcUnitSelect = document.getElementById('tc-unit');
            const hdlcUnitSelect = document.getElementById('hdlc-unit');
            const tgUnitSelect = document.getElementById('tg-unit');
            const riskCategoryCalcRadios = document.querySelectorAll('input[name="risk-category-calc"]');
            const clearCalculateLdlcBtn = document.getElementById('clear-calculate-ldlc-btn');


            // Function to reset results display
            function resetResults() {
                ldlcDisplay.textContent = '0.00 mmol/L';
                recommendationText.textContent = 'Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c th√¥ng tin ƒë·ªÉ t√≠nh to√°n.';
                recommendationText.className = "result-text text-indigo-700";
                warningText.classList.add('hidden');
                resultContainer.classList.add('hidden');
            }

            // Function to switch between forms
            function showForm(formToShow) {
                console.log('showForm called with:', formToShow); // Log to console for debugging
                // Common classes for active state
                const activeClasses = ['bg-indigo-600', 'text-white', 'shadow-md'];
                // Common classes for inactive state (using shadow-sm for a subtle shadow)
                const inactiveClasses = ['bg-gray-200', 'text-gray-700', 'shadow-sm']; 

                if (formToShow === 'direct') {
                    directLdlcForm.classList.remove('hidden');
                    calculateLdlcForm.classList.add('hidden');

                    // Apply active styles to directInputBtn
                    if (directInputBtn) {
                        directInputBtn.classList.add(...activeClasses);
                        directInputBtn.classList.remove(...inactiveClasses);
                    }
                    // Apply inactive styles to calculateLdlcBtn
                    if (calculateLdlcBtn) {
                        calculateLdlcBtn.classList.add(...inactiveClasses);
                        calculateLdlcBtn.classList.remove(...activeClasses);
                    }
                } else {
                    directLdlcForm.classList.add('hidden');
                    calculateLdlcForm.classList.remove('hidden');

                    // Apply inactive styles to directInputBtn
                    if (directInputBtn) {
                        directInputBtn.classList.add(...inactiveClasses);
                        directInputBtn.classList.remove(...activeClasses);
                    }
                    // Apply active styles to calculateLdlcBtn
                    if (calculateLdlcBtn) {
                        calculateLdlcBtn.classList.add(...activeClasses);
                        calculateLdlcBtn.classList.remove(...inactiveClasses);
                    }
                }
                resetResults();
            }

            // ESC/EAS Guidelines for LDLc targets (in mmol/L)
            const ldlcTargets = {
                'very-high': { target: 1.4, reduction: 'gi·∫£m √≠t nh·∫•t 50%' },
                'high': { target: 1.8, reduction: 'gi·∫£m √≠t nh·∫•t 50%' },
                'moderate': { target: 2.6 },
                'low': { target: 3.0 }
            };

            // Function to get selected risk category
            function getSelectedRiskCategory(radioGroup) {
                for (const radio of radioGroup) {
                    if (radio.checked) {
                        return radio.value;
                    }
                }
                return null;
            }

            // Function to determine recommendation
            function getRecommendation(ldlcValue, riskCategory, unit) {
                let ldlcMmolL = ldlcValue;
                if (unit === 'mg/dL') {
                    ldlcMmolL = ldlcValue / 38.6; // Convert mg/dL to mmol/L
                }

                const targetInfo = ldlcTargets[riskCategory];
                if (!targetInfo) {
                    return { text: "Kh√¥ng x√°c ƒë·ªãnh ph√¢n t·∫ßng nguy c∆°.", type: "error" };
                }

                const targetValue = targetInfo.target;
                let recommendationText = "";
                let textColor = "";

                if (ldlcMmolL < targetValue) {
                    recommendationText = `üéâ LDLc c·ªßa b·ªánh nh√¢n (${ldlcMmolL.toFixed(2)} mmol/L) ƒë√£ ƒë·∫°t m·ª•c ti√™u khuy·∫øn c√°o cho ph√¢n t·∫ßng nguy c∆° <strong>${riskCategory === 'very-high' ? 'R·∫•t cao' : riskCategory === 'high' ? 'Cao' : riskCategory === 'moderate' ? 'Trung b√¨nh' : 'Th·∫•p'}</strong> (< ${targetValue} mmol/L). Duy tr√¨ l·ªëi s·ªëng v√† theo d√µi ƒë·ªãnh k·ª≥.`;
                    textColor = "text-green-700";
                } else {
                    switch (riskCategory) {
                        case 'very-high':
                            recommendationText = `‚ö†Ô∏è LDLc c·ªßa b·ªánh nh√¢n (${ldlcMmolL.toFixed(2)} mmol/L) ch∆∞a ƒë·∫°t m·ª•c ti√™u (< ${targetValue} mmol/L v√† gi·∫£m √≠t nh·∫•t 50%). C·∫ßn kh·∫©n tr∆∞∆°ng xem x√©t <strong>tƒÉng c∆∞·ªùng ƒëi·ªÅu tr·ªã</strong>: li·ªáu ph√°p statin li·ªÅu cao v√†/ho·∫∑c c√≥ th·ªÉ c√¢n nh·∫Øc th√™m Ezetimibe ho·∫∑c PCSK9i n·∫øu kh√¥ng ƒë·∫°t m·ª•c ti√™u.`;
                            textColor = "text-red-600";
                            break;
                        case 'high':
                            recommendationText = `‚ö†Ô∏è LDLc c·ªßa b·ªánh nh√¢n (${ldlcMmolL.toFixed(2)} mmol/L) ch∆∞a ƒë·∫°t m·ª•c ti√™u (< ${targetValue} mmol/L v√† gi·∫£m √≠t nh·∫•t 50%). Xem x√©t <strong>li·ªáu ph√°p statin ph√π h·ª£p</strong> v√† <strong>thay ƒë·ªïi l·ªëi s·ªëng t√≠ch c·ª±c</strong>. C√≥ th·ªÉ c√¢n nh·∫Øc th√™m Ezetimibe n·∫øu kh√¥ng ƒë·∫°t m·ª•c ti√™u.`;
                            textColor = "text-orange-500";
                            break;
                        case 'moderate':
                            recommendationText = `‚ö†Ô∏è LDLc c·ªßa b·ªánh nh√¢n (${ldlcMmolL.toFixed(2)} mmol/L) ch∆∞a ƒë·∫°t m·ª•c ti√™u (< ${targetValue} mmol/L). T·∫≠p trung v√†o <strong>thay ƒë·ªïi l·ªëi s·ªëng l√†nh m·∫°nh</strong>. N·∫øu kh√¥ng ƒë·∫°t, c√¢n nh·∫Øc <strong>li·ªáu ph√°p statin</strong> v·ªõi m·ª•c ti√™u ƒë·∫°t LDLc < ${targetValue} mmol/L.`;
                            textColor = "text-yellow-600";
                            break;
                        case 'low':
                            recommendationText = `‚ö†Ô∏è LDLc c·ªßa b·ªánh nh√¢n (${ldlcMmolL.toFixed(2)} mmol/L) ch∆∞a ƒë·∫°t m·ª•c ti√™u (< ${targetValue} mmol/L). Khuy·∫øn kh√≠ch <strong>duy tr√¨ l·ªëi s·ªëng l√†nh m·∫°nh</strong>. Th∆∞·ªùng kh√¥ng c·∫ßn can thi·ªáp d∆∞·ª£c l√Ω tr·ª´ khi c√≥ y·∫øu t·ªë nguy c∆° m·ªõi ph√°t sinh ho·∫∑c t√¨nh tr·∫°ng l√¢m s√†ng thay ƒë·ªïi.`;
                            textColor = "text-indigo-700"; // Changed from red for low risk, but still above target. Can be adjusted.
                            break;
                        default:
                            recommendationText = "Vui l√≤ng ki·ªÉm tra l·∫°i ph√¢n t·∫ßng nguy c∆°.";
                            textColor = "text-gray-700";
                    }
                }
                return { text: recommendationText, type: "success", color: textColor };
            }

            // Handle Direct LDLc Input Form submission
            directLdlcForm.addEventListener('submit', function(event) {
                event.preventDefault();

                const ldlcValue = parseFloat(ldlcDirectInput.value);
                const ldlcUnit = ldlcUnitDirectSelect.value;
                const riskCategory = getSelectedRiskCategory(riskCategoryDirectRadios);

                if (isNaN(ldlcValue) || ldlcValue < 0 || !riskCategory) {
                    recommendationText.textContent = 'Vui l√≤ng nh·∫≠p gi√° tr·ªã LDLc h·ª£p l·ªá v√† ch·ªçn ph√¢n t·∫ßng nguy c∆°.';
                    recommendationText.className = "result-text text-red-500";
                    warningText.classList.add('hidden');
                    ldlcDisplay.textContent = '0.00 ' + ldlcUnit; // Display original unit
                    resultContainer.classList.remove('hidden');
                    return;
                }

                ldlcDisplay.textContent = `${ldlcValue.toFixed(2)} ${ldlcUnit}`;
                const result = getRecommendation(ldlcValue, riskCategory, ldlcUnit);
                recommendationText.innerHTML = result.text; // Use innerHTML to allow bold tags
                recommendationText.className = `result-text ${result.color}`;
                warningText.classList.add('hidden'); // Hide any previous warnings

                resultContainer.classList.remove('hidden');
                resultContainer.scrollIntoView({ behavior: 'smooth' }); // Added back scroll here
            });

            // Handle Calculate LDLc Form submission
            calculateLdlcForm.addEventListener('submit', function(event) {
                event.preventDefault();

                const tcValue = parseFloat(tcValueInput.value);
                const hdlcValue = parseFloat(hdlcValueInput.value);
                const tgValue = parseFloat(tgValueInput.value);
                
                const tcUnit = tcUnitSelect.value;
                const hdlcUnit = hdlcUnitSelect.value;
                const tgUnit = tgUnitSelect.value;

                // Validate that all units are the same for calculation
                if (tcUnit !== hdlcUnit || hdlcUnit !== tgUnit) {
                    recommendationText.textContent = 'Vui l√≤ng ch·ªçn c√πng m·ªôt ƒë∆°n v·ªã cho t·∫•t c·∫£ c√°c ch·ªâ s·ªë lipid (TC, HDLc, TG).';
                    recommendationText.className = "result-text text-red-500";
                    warningText.classList.add('hidden');
                    ldlcDisplay.textContent = '0.00 mmol/L'; // Default display
                    resultContainer.classList.remove('hidden');
                    return;
                }

                const lipidUnit = tcUnit; // Use any of them as they are guaranteed to be same
                const riskCategory = getSelectedRiskCategory(riskCategoryCalcRadios);

                if (isNaN(tcValue) || isNaN(hdlcValue) || isNaN(tgValue) || tcValue < 0 || hdlcValue < 0 || tgValue < 0 || !riskCategory) {
                    recommendationText.textContent = 'Vui l√≤ng nh·∫≠p c√°c gi√° tr·ªã lipid h·ª£p l·ªá v√† ch·ªçn ph√¢n t·∫ßng nguy c∆°.';
                    recommendationText.className = "result-text text-red-500";
                    warningText.classList.add('hidden');
                    ldlcDisplay.textContent = '0.00 ' + lipidUnit; // Display original unit
                    resultContainer.classList.remove('hidden');
                    return;
                }

                let calculatedLdlc;
                let tgThresholdExceeded = false;
                warningText.classList.add('hidden'); // Hide previous warnings

                if (lipidUnit === 'mmol/L') {
                    if (tgValue > 4.5) {
                        tgThresholdExceeded = true;
                        warningText.textContent = '‚ö†Ô∏è Triglyceride > 4.5 mmol/L. C√¥ng th·ª©c Friedewald kh√¥ng ƒë√°ng tin c·∫≠y. LDLc c√≥ th·ªÉ kh√¥ng ch√≠nh x√°c.';
                        warningText.classList.remove('hidden');
                    }
                    calculatedLdlc = tcValue - hdlcValue - (tgValue / 2.2);
                } else { // mg/dL
                    if (tgValue > 400) {
                        tgThresholdExceeded = true;
                        warningText.textContent = '‚ö†Ô∏è Triglyceride > 400 mg/dL. C√¥ng th·ª©c Friedewald kh√¥ng ƒë√°ng tin c·∫≠y. LDLc c√≥ th·ªÉ kh√¥ng ch√≠nh x√°c.';
                        warningText.classList.remove('hidden');
                    }
                    calculatedLdlc = tcValue - hdlcValue - (tgValue / 5);
                }

                if (calculatedLdlc < 0) {
                    calculatedLdlc = 0; // LDLc cannot be negative
                    warningText.textContent = 'Gi√° tr·ªã LDLc t√≠nh to√°n ra √¢m. Vui l√≤ng ki·ªÉm tra l·∫°i c√°c ch·ªâ s·ªë nh·∫≠p v√†o.';
                    warningText.classList.remove('hidden');
                }

                ldlcDisplay.textContent = `${calculatedLdlc.toFixed(2)} ${lipidUnit}`;
                const result = getRecommendation(calculatedLdlc, riskCategory, lipidUnit);
                recommendationText.innerHTML = result.text; // Use innerHTML to allow bold tags
                recommendationText.className = `result-text ${result.color}`;

                resultContainer.classList.remove('hidden');
                resultContainer.scrollIntoView({ behavior: 'smooth' }); // Added back scroll here
            });

            // Clear buttons functionality
            clearDirectBtn.addEventListener('click', function() {
                directLdlcForm.reset();
                resetResults();
                ldlcUnitDirectSelect.value = 'mmol/L'; // Reset unit to default
                riskCategoryDirectRadios[0].checked = true; // Default to Very High
            });

            clearCalculateLdlcBtn.addEventListener('click', function() {
                calculateLdlcForm.reset();
                resetResults();
                tcUnitSelect.value = 'mmol/L'; // Reset unit to default
                hdlcUnitSelect.value = 'mmol/L';
                tgUnitSelect.value = 'mmol/L';
                riskCategoryCalcRadios[0].checked = true; // Default to Very High
            });

            // Attach event listeners to toggle buttons
            if (directInputBtn) {
                directInputBtn.addEventListener('click', () => {
                    console.log('directInputBtn clicked');
                    showForm('direct');
                });
            } else {
                console.error("directInputBtn not found for click listener attachment.");
            }

            if (calculateLdlcBtn) {
                calculateLdlcBtn.addEventListener('click', () => {
                    console.log('calculateLdlcBtn clicked');
                    showForm('calculate');
                });
            } else {
                console.error("calculateLdlcBtn not found for click listener attachment.");
            }

            // Initialize to show direct input form
            showForm('direct');
        });
    </script>
</body>
</html>
